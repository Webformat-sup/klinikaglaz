function asproFilterHelper(smartFilter,noAjax){if(this.resultDiv=$("#filter-helper"),this.smart=smartFilter,this.noAjax=noAjax,this.resultDiv.length){this.resultDiv.empty(),this.smartFilter=$(".bx_filter.bx_filter_vertical"),this.filterHelper=[],this.getInputsInfo(this.smartFilter);var _this=this;$(document).on("click","#filter-helper .filterHelperItem .delete_filter, #filter-helper .filterHelperItem:not(.multiple) .title-wrapper",(function(e){var _el=$(e.target),id=_el.closest(".filterHelperItem").data("id"),options={};options.ID=id,_el.closest(".filterHelperItem").hasClass("multiple")&&(options.MULTIPLE=!0),_el.closest(".filterHelperItem").hasClass("price")&&(options.PRICE=!0),_this.clearValue(options)})),$(document).on("click","#filter-helper .filterHelperItem .select-wrapper .select-value",(function(e){var _el,id=$(e.target).closest(".select-value").data("id");_this.clearValue({ID:id})}))}}asproFilterHelper.prototype.check=function(){return this.resultDiv.length&&this.smartFilter.length},asproFilterHelper.prototype.getInputsInfo=function(smartFilter){if(smartFilter.length&&this.check()){var _this=this;this.filterHelper=[],this.inputs=smartFilter.find("input"),this.inputs.length&&this.inputs.each((function(i,el){var _el=$(el),bPrice=_el.hasClass("min-price")||_el.hasClass("max-price"),bChecked=_el.prop("checked")&&!_el.prop("disabled"),allTypeValue;if(_el[0].id.indexOf("all")&&bChecked||bPrice&&_el.val()){var title="",code="",boxWrapper=_el.closest(".bx_filter_parameters_box");if(boxWrapper.length){code=boxWrapper.data("prop_code")?boxWrapper.data("prop_code"):"";var titleWrapper=boxWrapper.data("property_name");void 0!==titleWrapper&&(title=titleWrapper)}var value=void 0===_el.data("title")?"":_el.data("title");if(!value){var label=smartFilter.find("label[for="+_el.attr("name")+"]"),labelFromId=smartFilter.find("label[for="+_el.attr("id")+"]");label.length?value=(value=label.find("[title]")).length?value.attr("title"):"":labelFromId.length&&(value=labelFromId.find("[title]"),value=labelFromId.length?value.attr("title"):"")}bPrice&&(_el.hasClass("min-price")?value=BX.message("FROM"):_el.hasClass("max-price")&&(value=BX.message("BEFORE")),value+=" "+_el.val(),code=_el.attr("name").replace(/_MIN|_MAX/,""));var helperData={NAME:_el.attr("id"),VALUE:value,INPUT:_el,TITLE:title.trim(),CODE:code,TYPE:bPrice?"price":_el.attr("type")};_this.add(helperData)}}))}},asproFilterHelper.prototype.reload=function(){if(!this.check())return!1;this.filterHelper=[],this.resultDiv.length&&(this.resultDiv.empty(),this.resultDiv.hide())},asproFilterHelper.prototype.add=function(arItem){if(!this.check())return!1;void 0===this.filterHelper&&this.reload(),void 0===this.filterHelper[arItem.CODE]&&(this.filterHelper[arItem.CODE]=[]),this.filterHelper[arItem.CODE].push(arItem)},asproFilterHelper.prototype.show=function(){if(!this.check())return!1;if(this.resultDiv=$("#filter-helper"),this.resultDiv.length&&this.filterHelper&&Object.keys(this.filterHelper).length){this.resultDiv.empty();var filterTitle="";filterTitle+='<div class="filter_title">',filterTitle+="<span>"+BX.message("FILTER_HELPER_TITLE")+"</span>",filterTitle+="</div>",this.resultDiv.append(filterTitle);var filtersWrapper=$('<div class="filterHelperItemsWrapper"></div>');this.resultDiv.append(filtersWrapper),this.resultDiv.append(filtersWrapper);var _this=this;for(var key in this.filterHelper){var html=this.getResultHTML(this.filterHelper[key]);html&&filtersWrapper.append(html)}this.resultDiv.css("display","flex")}},asproFilterHelper.prototype.clearValue=function(options){if(!this.check())return!1;if(void 0!==options.MULTIPLE&&options.MULTIPLE||void 0!==options.PRICE&&options.PRICE)if(void 0!==options.PRICE&&options.PRICE){var min=this.smartFilter.find("input.min-price#"+options.ID+"_MIN"),max=this.smartFilter.find("input.max-price#"+options.ID+"_MAX"),container=min.closest(".bx_filter_parameters_box_container");if(container.length){var encode=container.find("[id^=colorUnavailableActive_]").attr("id").replace("colorUnavailableActive_",""),track=window["trackBar"+encode];track.leftPercent=track.rightPercent=0,container.find("[id^=left_slider_]").css({left:"0%"}),container.find("[id^=colorUnavailableActive_]").css({left:"0%",right:"0%"}),container.find("[id^=colorAvailableInactive_]").css({left:"0%",right:"0%"}),container.find("[id^=colorAvailableActive_]").css({left:"0%",right:"0%"}),container.find("[id^=right_slider_]").css({right:"0%"})}if(min.length&&(min.val(""),smartFilter.keyup(min[0]),$("#"+options.ID+"_MIN").val("")),max.length){var defaultVal=max.attr("placeholder");max.val(""),smartFilter.keyup(max[0]),$("#"+options.ID+"_MAX").val("")}}else{var wrapper=this.smartFilter.find("[data-prop_code="+options.ID+"]");if(wrapper.length){var elements=wrapper.find("input");elements.length&&elements.each((function(i,el){var _el=$(el),label=_el.siblings("label[for="+_el.attr("id")+"]");label.length&&label.hasClass("active")?label.trigger("click"):el.checked&&_el.trigger("click")}))}}else{var el=$("#"+options.ID);if(el.length){var type=el.attr("type");if("checkbox"==type){var label=$("label[for="+options.ID+"]");label.length&&label.hasClass("active")?label.trigger("click"):el[0].checked&&el.trigger("click")}else if("radio"==type){var wrapperBox=el.closest(".bx_filter_parameters_box_container");if(wrapperBox.length){var popup=wrapperBox.siblings(".popup-window").length?wrapperBox.siblings(".popup-window"):!!wrapperBox.find(".bx_filter_select_popup").length&&wrapperBox.find(".bx_filter_select_popup"),bSelect=!!popup,allSelect=wrapperBox.find("[id^=all_]");if(allSelect.length){var id=allSelect.attr("id");if(bSelect){var all=popup.find("label[for="+id+"]");if(all.length){all.trigger("click"),popup.closest(".popup-window").length&&popup.closest(".popup-window").hide();var innerPopup=popup.find(".bx_filter_select_popup");innerPopup.length&&innerPopup.show()}}else allSelect.trigger("click")}}}}}this.noAjax&&(this.reloadPage=!0)},asproFilterHelper.prototype.apply=function(){if(!this.check())return!1;if(this.noAjax&&this.reloadPage){var apply=this.smartFilter.find("#set_filter");apply.length&&apply.trigger("click")}},asproFilterHelper.prototype.getResultHTML=function(el){if(!this.check())return!1;if(1==el.length){var options;(options=el[0]).ITEM_CLASS=" colored_theme_bg_hovered_hover ","price"==el[0].TYPE&&(options.ITEM_CLASS+=" price",options.NAME=options.NAME.replace(/_MIN|_MAX/,""))}else{if(!(el.length>1))return!1;var options={NAME:el[0].CODE,TITLE:el[0].TITLE,VALUE:el.length+BX.message("FILTER_HELPER_VALUES"),ITEM_CLASS:"price"==el[0].TYPE?"price colored_theme_bg_hovered_hover":"multiple",TYPE:el[0].TYPE,VALUES:el}}"in_stock"==options.CODE&&(options.TITLE="");var closeSvg="";closeSvg+='<svg xmlns="http://www.w3.org/2000/svg" width="8.031" height="8" viewBox="0 0 8.031 8">',closeSvg+='<path class="cls-1" d="M756.41,668.967l2.313,2.315a1,1,0,0,1-1.415,1.409L755,670.379l-2.309,2.312a1,1,0,0,1-1.414-1.409l2.312-2.315-2.281-2.284a1,1,0,1,1,1.414-1.409L755,667.555l2.277-2.281a1,1,0,1,1,1.414,1.409Z" transform="translate(-751 -665)"></path>',closeSvg+="</svg>";var resultText="";return resultText+='<div class="filterHelperItem colored_theme_bg rounded3'+(void 0===options.ITEM_CLASS?"":" "+options.ITEM_CLASS)+'" data-id="'+options.NAME+'">',resultText+='<div class="title-wrapper colored_theme_bg_hovered_hover">',options.TITLE&&(resultText+='<span class="title">',resultText+=options.TITLE+": ",resultText+="</span>"),resultText+='<span class="value">',"price"==options.TYPE&&void 0!==options.VALUES?options.VALUES.forEach((function(el,i){resultText+=el.VALUE+" "})):resultText+=options.VALUE,resultText+="</span>",resultText+="</div>",resultText+='<span class="delete_filter colored_theme_bg_hovered_hover">',resultText+=closeSvg,resultText+="</span>",void 0!==options.VALUES&&"price"!=options.TYPE&&(resultText+='<div class="select-wrapper">',resultText+='<div class="select-inner rounded3">',options.VALUES.forEach((function(el,i){resultText+='<div class="select-value" data-id="'+el.NAME+'">',resultText+=el.VALUE,resultText+=closeSvg,resultText+="</div>"})),resultText+="</div>",resultText+="</div>"),resultText+="</div>"};